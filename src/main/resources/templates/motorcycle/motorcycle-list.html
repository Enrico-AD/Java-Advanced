<div th:fragment="motorcycle-list" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
    <div id="motorcycles-list">

        <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
            <span th:text="${errorMessage}"></span>
        </div>

        <div class="d-flex justify-content-end mb-3">
            <button sec:authorize="hasRole('ROLE_ADMIN')"
                    class="btn btn-primary"
                    th:hx-get="@{/motorcycle/new}"
                    hx-target="#modalContent"
                    hx-swap="innerHTML"
                    data-bs-toggle="modal"
                    data-bs-target="#mainModal">
                <i class="bi bi-plus-circle"></i> Nova Moto
            </button>
        </div>
        <div class="table-container">
            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th style="width: 180px;">Modelo</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" style="width: 150px;">Placa</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" style="width: 220px;">Chassi</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" style="width: 150px;">Motor</th>
                    <th style="width: 200px;">Pátio</th>
                    <th sec:authorize="hasRole('ROLE_ADMIN')" style="width: 150px;">Ações</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="moto : ${motorcycles}">
                    <td th:text="${moto.model}"></td>
                    <td sec:authorize="hasRole('ROLE_ADMIN')" th:text="${moto.licensePlate}"></td>
                    <td sec:authorize="hasRole('ROLE_ADMIN')" th:text="${moto.chassis}"></td>
                    <td sec:authorize="hasRole('ROLE_ADMIN')" th:text="${moto.engineNumber}"></td>
                    <td th:text="${moto.yard.name}"></td>
                    <td sec:authorize="hasRole('ROLE_ADMIN')">
                        <button sec:authorize="isAuthenticated()"
                                class="btn btn-outline-primary btn-sm"
                                th:hx-get="@{/motorcycle/{id}/details(id=${moto.id})}"
                                hx-target="#modalContent"
                                hx-swap="innerHTML"
                                data-bs-toggle="modal"
                                data-bs-target="#mainModal">
                            <i class="bi bi-eye"></i> Ver detalhes
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
