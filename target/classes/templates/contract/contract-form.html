<div id="dialog" th:fragment="contract-edit-form" class="custom-modal-overlay" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="custom-modal">

        <div class="modal-header">
            <h5 class="modal-title">Contrato [[${contract.contractNumber}]]</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <form th:object="${contract}"
              th:action="${contract.id} != null ? @{/contract/{id}/update(id=${contract.id})} : @{/contract/new}"
              method="post"
              hx-post="${contract.id} != null ? '/contract/' + ${contract.id} + '/update' : '/contract/new'"
              hx-target="#contracts"
              hx-swap="innerHTML">

                    <input type="hidden" th:field="*{id}" />
                    <input type="hidden" th:field="*{tenant.id}" />
                    <input type="hidden" th:field="*{motorcycle.id}" />

                    <div class="form-group">
                        <label>Data de início</label>
                        <input type="date"
                               th:field="*{startDate}"
                               th:value="*{startDate}"
                               th:attr="max=${#temporals.format(contract.endDate, 'yyyy-MM-dd')}" />
                    </div>

                    <div class="form-group">
                        <label>Data de término</label>
                        <input type="date"
                               th:field="*{endDate}"
                               th:value="*{endDate}"
                               th:attr="min=${#temporals.format(contract.startDate, 'yyyy-MM-dd')}" />
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select th:field="*{status}">
                            <option th:each="s : ${statuses}"
                                    th:value="${s.description}"
                                    th:text="${s.description}">
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Motocicleta</label>
                        <select th:field="*{motorcycleId}" required>
                            <option value="">-- Selecione uma moto --</option>
                            <option th:each="motorcycle : ${motorcycles}"
                                    th:value="${motorcycle.id}"
                                    th:text="${motorcycle.model + ' - ' + motorcycle.licensePlate}">
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Nome</label>
                        <input type="text" th:field="*{tenant.fullName}" required/>
                    </div>

                    <div class="form-group">
                        <label>CPF</label>
                        <input type="text" th:field="*{tenant.cpf}" required/>
                    </div>

                    <div class="form-group">
                        <label>Endereço</label>
                        <input type="text" th:field="*{tenant.address.streetName}" required/>
                    </div>

                    <div class="form-group">
                        <label>Número</label>
                        <input type="number" th:field="*{tenant.address.number}" min="1" required/>
                    </div>

                    <div class="form-group">
                        <label>Complemento</label>
                        <input type="text" th:field="*{tenant.address.complement}"/>
                    </div>

                    <div class="form-group">
                        <label>CEP</label>
                        <input type="text" th:field="*{tenant.address.zipCode}" pattern="\d{8}" required/>
                    </div>

                    <div class="custom-modal-footer">
                        <button type="submit" class="btn btn-primary">Salvar</button>
                        <button type="button" class="btn btn-secondary"
                                onclick="document.getElementById('dialog').innerHTML = ''">
                            Cancelar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
