<div id="dialog" th:fragment="contract-form" class="custom-modal-overlay" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="custom-modal">
        <div class="modal-header">
            <h5 class="modal-title">Contrato [[${contract.contractNumber}]]</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>


        <form th:object="${contract}"
              method="post"
              th:attr="hx-post=${formAction}"
              th:action="${formAction}"
              hx-target="#contracts-list"
              hx-swap="innerHTML">

            <input type="hidden" th:field="*{tenant.id}" />

            <div class="mb-3">
                <label class="form-label">Data de início</label>
                <input type="date" th:field="*{startDate}" class="form-control" required>
                <div class="invalid-feedback">A data de início deve ser anterior à data de término.</div>
            </div>

            <div class="mb-3">
                <label class="form-label">Data de término</label>
                <input type="date" th:field="*{endDate}" class="form-control">
                <div class="invalid-feedback">A data de término deve ser posterior à data de início.</div>
            </div>

            <div class="mb-3">
                <label for="status" class="form-label">Status</label>
                <select class="form-select" id="status" name="status.description">
                    <option th:if="${currentStatus != null}"
                            th:value="${currentStatus}"
                            th:text="${currentStatus}"
                            selected="selected">
                    </option>
                    <option th:each="status : ${statuses}"
                            th:value="${status}"
                            th:text="${status}"
                            th:if="${status != currentStatus}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Motocicleta</label>
                <select class="form-select" th:field="*{motorcycle.id}" required>
                    <option value="">-- Selecione uma moto --</option>
                    <option th:each="m : ${motorcycles}"
                            th:value="${m.id}"
                            th:text="${m.model + ' - ' + m.licensePlate}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Nome</label>
                <input type="text" th:field="*{tenant.fullName}" required/>
            </div>

            <div class="mb-3">
                <label class="form-label">CPF</label>
                <input type="text" th:field="*{tenant.cpf}" class="form-control" id="cpf" required>
                <div class="invalid-feedback">Informe um CPF válido.</div>
            </div>

            <div class="form-group">
                <label>Endereço</label>
                <input type="text" th:field="*{tenant.address.streetName}" required/>
            </div>

            <div class="form-group">
                <label>Número</label>
                <input type="number" th:field="*{tenant.address.number}" min="1" required/>
            </div>

            <div class="form-group">
                <label>Complemento</label>
                <input type="text" th:field="*{tenant.address.complement}"/>
            </div>

            <div class="mb-3">
                <label class="form-label">CEP</label>
                <input type="text" th:field="*{tenant.address.zipCode}" class="form-control"/>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('tenant.address.zipCode')}"
                     th:errors="*{tenant.address.zipCode}"></div>
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Salvar</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </form>
    </div>
</div>
